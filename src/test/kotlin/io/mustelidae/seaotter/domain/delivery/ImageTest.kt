package io.mustelidae.seaotter.domain.delivery

import io.kotlintest.shouldBe
import io.mustelidae.seaotter.constant.ImageFileFormat
import org.junit.jupiter.api.Test

internal class ImageTest {

    @Test
    fun base64() {
        // Given
        val base64 = """
            data:image/png;base64,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
        """.trimIndent()

        // When
        val image = Image.from(base64)

        // Then
        image.imageFileFormat shouldBe ImageFileFormat.PNG
    }
}
